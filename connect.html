<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Netradapps — Connect Wallet</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
<script src="https://cdn.jsdelivr.net/npm/ethers@6.8.0/dist/ethers.umd.min.js"></script>
<script src="https://unpkg.com/@walletconnect/web3modal@2.6.9/dist/index.umd.js"></script>
<script src="https://unpkg.com/@web3modal/standalone@2.1.0/dist/index.umd.js"></script>

<style>
:root{
  --bg:#061125; --panel:#0d1624; --muted:#9fb0c9; 
  --accent:#18d884; --glass:rgba(255,255,255,0.03);
  --card-shadow:0 8px 26px rgba(2,8,23,0.7);
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto;
}

*{box-sizing:border-box}
body{
  margin:0;height:100%;
  background:linear-gradient(180deg,#031022,#07162a);
  color:#e8f3ff;
}

.wrap{max-width:430px;margin:40px auto;padding:20px;text-align:center;}

.logo-box{
  width:70px;height:70px;border-radius:16px;
  background:linear-gradient(135deg,#12b886,#15a0ff);
  display:flex;align-items:center;justify-content:center;
  font-size:26px;font-weight:800;color:#071720;
  margin:0 auto 14px auto;
}

h1{margin:0;font-size:22px;font-weight:700;}
.sub{font-size:14px;color:var(--muted);margin-top:6px;}

.card{
  margin-top:26px;background:var(--glass);
  padding:20px;border-radius:16px;box-shadow:var(--card-shadow);
  backdrop-filter:blur(8px);
}

.wallet-button{
  padding:14px;border-radius:12px;margin-top:12px;width:100%;
  background:linear-gradient(90deg,var(--accent),#21a7ff);
  border:none;font-size:16px;color:#06251a;
  cursor:pointer;font-weight:700;
}

.option{
  display:flex;gap:14px;align-items:center;
  padding:12px;border-radius:12px;margin-top:12px;
  background:rgba(255,255,255,0.02);
  border:1px solid rgba(255,255,255,0.03);
  cursor:pointer;
}
.option:hover{background:rgba(255,255,255,0.05);}
.option img{width:38px;height:38px;border-radius:10px;}
.option .t1{font-weight:700; font-size:20px;}
.option .t2{font-size:12px;color:var(--muted); color:blue;}

#status{
  margin-top:20px;
  font-size:14px;
  font-weight:600;
  color:var(--accent);
}

.footer{margin-top:26px;color:var(--muted);font-size:12px;}
</style>
</head>

<body>
<div class="wrap">
  <div class="logo-box">ND</div>
  <h1>Connect Your Wallet</h1>
  <div class="sub">Use Trust Wallet, MetaMask, WalletConnect or any Web3 wallet.</div>

  <div class="card">
    <button class="wallet-button" id="connectMain">
    </button>

    <div style="margin-top:18px;font-weight:700;color:var(--muted)">Or Choose Wallet</div>

    <!-- MetaMask -->
    <button class="wallet-button">
    <div class="option" id="connectMetaMask">
         <i class="fa-solid fa-plug"></i>
      <div>
        <div class="t1">Connect Wallet</div>
            </div>
        <div class="t2">Browser Extension</div>
      </div>
    </button>
    <div id="status"></div>
  </div>

  <div class="footer">Netradapps • Secure Web3 Dashboard</div>
</div>
<script>
  let provider, signer, address;

/* ------------------------------
    STATUS MESSAGE
------------------------------ */
function showStatus(message, isError = false) {
  const el = document.getElementById("status");
  el.textContent = message;
  el.style.color = isError ? "#ff5c5c" : "var(--accent)";
}

/* ------------------------------
    POPUP AFTER CONNECT
------------------------------ */
async function openTradePopup() {
  const balance = await provider.getBalance(address);
  const ethBalance = ethers.formatEther(balance);
  const userBalance = parseFloat(ethBalance).toFixed(6);

  const popup = document.createElement("div");
  popup.style.cssText = `
    position:fixed;top:0;left:0;width:100%;height:100%;
    background:rgba(0,0,0,0.7);
    display:flex;align-items:center;justify-content:center;
    z-index:9999;
  `;

  popup.innerHTML = `
    <div style="
      background:#0d1624;padding:24px;border-radius:16px;
      width:90%;max-width:360px;text-align:center;color:#fff;
      box-shadow:0 10px 30px rgba(0,0,0,0.4);
    ">
      <h2 style="margin:0;font-size:20px;">Wallet Connected</h2>
      <p style="font-size:13px;color:#9fb0c9;margin-top:10px;">
        ${address.substring(0,6)}...${address.substring(address.length-4)}
      </p>

      <p style="margin-top:10px;font-size:16px;font-weight:700;color:#18d884;">
        Balance: ${userBalance} ETH
      </p>

      <div style="margin-top:16px;text-align:left;font-size:14px;">
        <label>Enter amount to trade:</label>
        <input id="tradeAmount" type="number" step="0.0001" min="0"
          value="${userBalance}"
          style="width:100%;padding:10px;margin-top:6px;
          border-radius:10px;border:none;background:#112033;color:#fff;"
        />
      </div>

      <button id="confirmTrade" style="
        margin-top:18px;width:100%;padding:12px;
        background:linear-gradient(90deg,#18d884,#21a7ff);
        border:none;border-radius:12px;font-size:16px;
        color:#06251a;font-weight:700;cursor:pointer;
      ">Continue</button>

      <button id="closePopup" style="
        margin-top:10px;width:100%;padding:10px;
        background:#222;border:1px solid #444;
        border-radius:10px;color:#ccc;cursor:pointer;
        font-size:14px;
      ">Cancel</button>
    </div>
  `;

  document.body.appendChild(popup);

  document.getElementById("closePopup").onclick = () => popup.remove();

  document.getElementById("confirmTrade").onclick = () => {
    const amount = document.getElementById("tradeAmount").value;
    alert("Amount chosen: " + amount + " ETH\nNext step: trading process.");
    popup.remove();
  };
}

/* ------------------------------
    METAMASK
------------------------------ */
async function useMetaMask() {
  try {
    if (!window.ethereum) throw new Error("MetaMask not found.");
    provider = new ethers.BrowserProvider(window.ethereum);
    await provider.send("eth_requestAccounts", []);
    signer = await provider.getSigner();
    address = await signer.getAddress();
    await openTradePopup();
  } catch (err) {
    showStatus("MetaMask Error: " + err.message, true);
  }
}

/* ------------------------------
    WALLETCONNECT (for mobile & standalone)
------------------------------ */
async function useWalletConnect() {
  try {
    const wc = new window.Web3ModalStandalone.StandaloneModal({
      projectId: "YOUR_PROJECT_ID", // <-- Replace with your real WalletConnect Project ID
      themeMode: "dark"
    });

    const instance = await wc.connect();

    provider = new ethers.BrowserProvider(instance);
    signer = await provider.getSigner();
    address = await signer.getAddress();
    await openTradePopup();
  } catch (err) {
    showStatus("WalletConnect Error: " + err.message, true);
  }
}

/* ------------------------------
    BUTTON EVENTS
------------------------------ */
document.getElementById("connectMain").onclick = useWalletConnect;
document.getElementById("connectMetaMask").onclick = useMetaMask;
document.getElementById("connectTrust").onclick = useWalletConnect;
document.getElementById("connectWC").onclick = useWalletConnect;
</script>
</body>
</html>